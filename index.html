<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Team Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="dark-theme">
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-futbol"></i>
                    <h1>Team Manager</h1>
                </div>
                <div class="header-controls">
                    <button class="btn btn-secondary" id="tacticalModeBtn">
                        <i class="fas fa-draw-polygon"></i>
                        Modalità Tattica
                    </button>
                    <button class="btn btn-danger" id="clearFieldBtn">
                        <i class="fas fa-broom"></i>
                        Clear Field
                    </button>
                    <button class="btn btn-primary" id="playerManagementBtn">
                        <i class="fas fa-users"></i>
                        Gestione Giocatori
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>Team Settings</h3>
                    <div class="form-group">
                        <label for="teamDisplayMode">Modalità Visualizzazione Squadra</label>
                        <select id="teamDisplayMode">
                            <option value="all">Tutte le squadre</option>
                            <option value="1">1 squadra</option>
                            <option value="2">2 squadre</option>
                        </select>
                    </div>
                    
                    <!-- Dynamic Squad Selection Sections -->
                    <div id="squadSelectionsContainer">
                        <!-- Squad selections will be dynamically added here -->
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>Player Pool</h3>
                    <div class="player-filters">
                        <div class="form-group">
                            <label for="playerSquadFilter">Filtra per Squadra</label>
                            <select id="playerSquadFilter">
                                <option value="">All Squads</option>
                                <option value="alpak">Alpak</option>
                                <option value="bigbro">Big Bro</option>
                                <option value="boomers">Boomers</option>
                                <option value="caesar">Caesar</option>
                                <option value="circus">Circus</option>
                                <option value="d power">D Power</option>
                                <option value="fc zeta">FC Zeta</option>
                                <option value="gear 7">Gear 7</option>
                                <option value="stallions">Stallions</option>
                                <option value="trm fc">TRM FC</option>
                                <option value="underdogs fc">Underdogs FC</option>
                                <option value="zebras fc">Zebras FC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="playerNameFilter">Filtra per Nome</label>
                            <input type="text" id="playerNameFilter" placeholder="Search player name...">
                        </div>
                        <div class="form-group">
                            <label for="playerPositionFilter">Filtra per Posizione</label>
                            <select id="playerPositionFilter">
                                <option value="">All Positions</option>
                                <option value="PORTIERE">PORTIERE</option>
                                <option value="DIFENSORE">DIFENSORE</option>
                                <option value="CENTROCAMPISTA">CENTROCAMPISTA</option>
                                <option value="ATTACCANTE">ATTACCANTE</option>
                            </select>
                        </div>
                    </div>
                    <div class="player-pool" id="playerPool">
                        <!-- Player cards will be dynamically added here -->
                    </div>
                </div>
            </aside>

            <!-- Field Area -->
            <div class="field-container">
                <!-- Tactical Drawing Tools Panel -->
                <div class="tactical-tools-panel" id="tacticalToolsPanel" style="display: none;">
                    <div class="tools-header">
                        <h3><i class="fas fa-palette"></i> Strumenti Tattici</h3>
                        <button class="btn btn-sm btn-danger" id="closeTacticalMode">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="tools-section">
                        <h4>Strumenti di Disegno</h4>
                        <div class="tool-buttons">
                            <button class="tool-btn active" data-tool="select" title="Seleziona">
                                <i class="fas fa-mouse-pointer"></i>
                            </button>
                            <button class="tool-btn" data-tool="line" title="Linea">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button class="tool-btn" data-tool="arrow" title="Freccia">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <button class="tool-btn" data-tool="circle" title="Cerchio">
                                <i class="fas fa-circle"></i>
                            </button>
                            <button class="tool-btn" data-tool="rectangle" title="Rettangolo">
                                <i class="fas fa-square"></i>
                            </button>
                            <button class="tool-btn" data-tool="text" title="Testo">
                                <i class="fas fa-font"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tools-section">
                        <h4>Proprietà</h4>
                        <div class="form-group">
                            <label for="strokeColor">Colore</label>
                            <input type="color" id="strokeColor" value="#ff0000">
                        </div>
                        <div class="form-group">
                            <label for="strokeWidth">Spessore</label>
                            <input type="range" id="strokeWidth" min="1" max="10" value="3">
                            <span id="strokeWidthValue">3px</span>
                        </div>
                        <div class="form-group">
                            <label for="fillColor">Riempimento</label>
                            <input type="color" id="fillColor" value="#ffffff">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="fillEnabled"> Abilita riempimento
                            </label>
                        </div>
                    </div>
                    
                    <div class="tools-section">
                        <h4>Azioni</h4>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-secondary" id="undoBtn" title="Annulla">
                                <i class="fas fa-undo"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary" id="redoBtn" title="Ripeti">
                                <i class="fas fa-redo"></i>
                            </button>
                            <button class="btn btn-sm btn-warning" id="clearDrawingBtn" title="Cancella tutto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>

                    </div>
                </div>
                
                <div class="field" id="footballField">
                    <!-- SVG Canvas for tactical drawings -->
                    <svg class="tactical-canvas" id="tacticalCanvas" style="display: none;">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                    refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="currentColor" />
                            </marker>
                        </defs>
                    </svg>
                    
                    <!-- Field markings removed to avoid overlap with campo.png background -->
                    
                    <!-- Drop zones for different positions -->
                    <div class="position-zone goalkeeper-zone" data-position="GK">
                        <span class="zone-label">GK</span>
                    </div>
                    
                    <div class="position-zone defender-zone" data-position="DEF">
                        <span class="zone-label">Defenders</span>
                    </div>
                    
                    <div class="position-zone midfielder-zone" data-position="MID">
                        <span class="zone-label">Midfielders</span>
                    </div>
                    
                    <div class="position-zone forward-zone" data-position="FWD">
                        <span class="zone-label">Forwards</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Tactical Scheme Save/Load Modal -->
    <div class="modal" id="schemeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="schemeModalTitle">Gestione Schemi Tattici</h2>
                <button class="modal-close" id="schemeModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="scheme-actions">
                    <div class="form-group">
                        <label for="schemeName">Nome Schema</label>
                        <input type="text" id="schemeName" placeholder="Inserisci nome schema...">
                    </div>
                    <div class="saved-schemes">
                        <h4>Schemi Salvati</h4>
                        <div id="savedSchemesList">
                            <!-- Lista schemi salvati -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelSchemeBtn">Annulla</button>
                <button type="button" class="btn btn-success" id="saveSchemeConfirmBtn">Salva Schema</button>
                <button type="button" class="btn btn-primary" id="loadSchemeConfirmBtn" style="display: none;">Carica Schema</button>
            </div>
        </div>
    </div>



    <!-- Player Management Modal -->
    <div class="modal" id="playerModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Aggiungi Giocatore</h2>
                <button class="modal-close" id="playerModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Aggiungi Giocatore Form -->
                <div class="tab-content active" id="addTab">
                    <form id="playerForm">
                        <div class="form-group">
                            <label for="playerName">Nome Giocatore</label>
                            <input type="text" id="playerName" required>
                        </div>
                        <div class="form-group">
                            <label for="playerPosition">Posizione</label>
                            <select id="playerPosition" required>
                                <option value="">Seleziona posizione</option>
                                <option value="PORTIERE">PORTIERE</option>
                                <option value="DIFENSORE">DIFENSORE</option>
                                <option value="CENTROCAMPISTA">CENTROCAMPISTA</option>
                                <option value="ATTACCANTE">ATTACCANTE</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="playerSquad">Squadra</label>
                            <select id="playerSquad" required>
                                <option value="">Seleziona squadra</option>
                                <option value="alpak">Alpak</option>
                                <option value="bigbro">Big Bro</option>
                                <option value="boomers">Boomers</option>
                                <option value="caesar">Caesar</option>
                                <option value="circus">Circus</option>
                                <option value="d power">D Power</option>
                                <option value="fc zeta">FC Zeta</option>
                                <option value="gear 7">Gear 7</option>
                                <option value="stallions">Stallions</option>
                                <option value="trm fc">TRM FC</option>
                                <option value="underdogs fc">Underdogs FC</option>
                                <option value="zebras fc">Zebras FC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="playerWildcard">WILDCARD</label>
                            <select id="playerWildcard">
                                <option value="NO">NO</option>
                                <option value="SI">SI</option>
                            </select>
                        </div>
                        <input type="hidden" id="editingPlayerId" value="">
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelPlayerBtn">Annulla</button>
                <button type="button" class="btn btn-success" id="savePlayerBtn">Salva Giocatore</button>
            </div>
        </div>
    </div>

    <!-- Scheme Management Modal -->
    <div class="modal" id="schemeModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Gestione Schemi Tattici</h2>
                <button class="modal-close" id="schemeModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="schemeName">Nome Schema</label>
                    <input type="text" id="schemeName" placeholder="Inserisci nome schema...">
                </div>
                <div class="saved-schemes">
                    <h4>Schemi Salvati</h4>
                    <div id="schemesList"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelSchemeBtn">Annulla</button>
                <button type="button" class="btn btn-success" id="saveSchemeConfirmBtn">Salva</button>
                <button type="button" class="btn btn-info" id="loadSchemeConfirmBtn">Carica</button>
            </div>
        </div>
    </div>

    <!-- Text Input Modal -->
    <div class="modal" id="textInputModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="textModalTitle">Inserisci Testo</h2>
                <button class="modal-close" id="textModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="textInput">Testo</label>
                    <input type="text" id="textInput" placeholder="Inserisci il testo...">
                </div>
                <div class="form-group">
                    <label for="textColorInput">Colore Testo</label>
                    <input type="color" id="textColorInput" value="#3b82f6">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="textModalDelete" style="display: none;">
                    <i class="fas fa-trash"></i>
                    Elimina
                </button>
                <button type="button" class="btn btn-secondary" id="textModalCancel">Annulla</button>
                <button type="button" class="btn btn-primary" id="textModalConfirm">Conferma</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirmationTitle">Conferma Azione</h3>
                <button type="button" class="modal-close" id="confirmationModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirmation-content">
                    <div class="confirmation-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <p id="confirmationMessage">Sei sicuro di voler procedere?</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmationCancel">
                    <i class="fas fa-times"></i>
                    No, Annulla
                </button>
                <button type="button" class="btn btn-danger" id="confirmationConfirm">
                    <i class="fas fa-check"></i>
                    Sì, Conferma
                </button>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>



    <script src="button-feedback.js"></script>
    <script src="script.js"></script>
</body>
</html>